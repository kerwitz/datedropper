

	//////////////////////////////////////
	// DATEDROPPER Version 1	    //
	// Last Updates: 20/02/2015	    //
	//		  		    //
	// Made with love by		    //
	// Felice Gattuso		    //
	//////////////////////////////////////


$.fn.dateDropper=function(e){if(this.is("input")&&"text"==this.attr("type")){var a=(new Date).getFullYear(),i=(new Date).getDate(),t=(new Date).getMonth(),s=$.extend({animate_current:!0,animation:"fadein",color:"#f87a54",format:"m/d/Y",lang:"en",lock:!1,maxYear:a,minYear:1970,placeholder:"Select date",years_multiple:!1},e),r=this,o=$(".dd_wrap").length+1,_=function(d){return!(d%4||!(d%100)&&d%400)},u=100,f=/^#[0-9A-F]{6}$/i.test(s.color),c=function(d){return(""+d).substr(0,3)+s.years_multiple},v=0;f||(s.color="#f87a54"),s.maxYear<a&&(a=s.maxYear),$('<div class="dd_wrap" id="dd_'+o+'"><div class="dd_overlay"></div><div class="dd_"></div></div>').appendTo("body");var m=$("#dd_"+o),p=m.find(".dd_");dd_overlay=m.find(".dd_overlay"),$(window).on("resize",function(){p.css({top:r.offset().top+(r.height()+12),left:r.offset().left+(r.width()/2-u/2)-2})}),$("<style>#dd_"+o+" .dd_ .dd_submit,#dd_"+o+" .dd_ .dd_r_ ul li { background-color: "+s.color+"; } #dd_"+o+" .dd_ .dd_d_ .dd_sl_ ul li em , #dd_"+o+" .dd_ .dd_d_ .dd_sl_ ul li.dd_sunday{ color: "+s.color+"; }</style>").appendTo("head"),r.attr({readonly:"readonly"}).addClass("dd_locked").val(s.placeholder),p.append('<div class="dd_sw_ dd_m_"><a class="dd_nav_ dd_prev_"></a><a class="dd_nav_ dd_next_"></a><div class="dd_sl_"></div></div>'),p.append('<div class="dd_sw_ dd_d_"><a class="dd_nav_ dd_prev_"></a><a class="dd_nav_ dd_next_"></a><div class="dd_sl_"></div></div>'),p.append('<div class="dd_sw_ dd_y_"><a class="dd_nav_ dd_prev_"></a><a class="dd_nav_ dd_next_"></a><div class="dd_sl_"></div></div>'),s.years_multiple&&p.append('<div class="dd_r_"></div>'),p.append('<div class="dd_submit"></div>');var b=p.find(".dd_m_"),h=p.find(".dd_d_"),g=(p.find(".dd_y_w"),p.find(".dd_y_")),y=p.find(".dd_r_"),C=p.find(".dd_submit");switch(s.lang){case"si":var k=["januar","februar","marec","april","maj","junij","julij","avgust","september","oktober","november","december"],w=["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dev"],J=["nedelja","ponedeljek","torek","sreda","četrtek","petek","sobota"];break;case"it":var k=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],w=["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],J=["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"];break;case"hu":var k=["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],w=["jan.","febr.","márc.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec."],J=["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"];break;case"es":var k=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],w=["Ene.","Feb.","Mar.","Abr.","May.","Jun.","Jul.","Ago.","Sept.","Oct.","Nov.","Dic."],J=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Samedi"];break;case"de":var k=["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],w=["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sept","Okt","Nov","Dez"],J=["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"];break;case"nl":var k=["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],w=["Jan.","Feb.","Mrt.","Apr.","Mei","Jun.","Jul.","Aug.","Sep.","Okt.","Nov.","Dec."],J=["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"];break;case"fr":var k=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],w=["Janv.","Févr.","Mars","Avr.","Mai","Juin","Juil.","Août","Sept.","Oct.","Nov.","Déc."],J=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"];break;case"pt":var k=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],w=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],J=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"];break;default:var k=["January","February","March","April","May","June","July","August","September","October","November","December"],w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],J=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}b.find(".dd_sl_").append("<ul></ul>");for(var A=1;12>=A;A++)months=w[A-1],b.find("ul").append('<li value="'+A+'">'+months+"</li>");h.find(".dd_sl_").append("<ul></ul>");for(var S=1;31>=S;S++)ddd=10>S?"0"+S:S,h.find("ul").append('<li value="'+S+'">'+ddd+"<em ></em></li>");g.find(".dd_sl_").append("<ul></ul>");for(var L=s.minYear;L<=s.maxYear;L++)bissextile_return=_(L),g.find("ul").append('<li value="'+L+'" data-filter="'+bissextile_return+'">'+L+"</li>");if(s.years_multiple){y.append("<ul></ul>");for(var z=s.minYear;z<=s.maxYear;z++){var Y=z%s.years_multiple;0==Y&&y.find("ul").append('<li value="'+z+'"></li>')}var N=u/y.find("li").length;y.find("li").css({width:N+"%"}),y.find("li[value="+c(a)+"]").addClass("dd_sltd_")}var O=function(){h.find("li").eq(i-1).addClass("dd_sltd_"),b.find("li").eq(t).addClass("dd_sltd_"),g.find("li[value="+a+"]").addClass("dd_sltd_"),s.years_multiple&&y.find("li[value="+c(a)+"]").addClass("dd_sltd_")},T=function(){b.find(".dd_sl_").animate({scrollLeft:t*u},1200,"swing"),setTimeout(function(){h.find(".dd_sl_").animate({scrollLeft:(i-1)*u},1200,"swing"),setTimeout(function(){g.find(".dd_sl_").animate({scrollLeft:g.find(".dd_sl_ li[value="+a+"]").index()*u},1200,"swing")},200)},400)},q=function(){b.find(".dd_sl_").scrollLeft(t*u),h.find(".dd_sl_").scrollLeft((i-1)*u),g.find(".dd_sl_").scrollLeft(g.find(".dd_sl_ li[value="+a+"]").index()*u)},G=function(){b.find(".dd_sl_").scrollLeft(b.find("li.dd_sltd_").index()*u),h.find(".dd_sl_").scrollLeft(h.find("li.dd_sltd_").index()*u),g.find(".dd_sl_").scrollLeft(g.find("li.dd_sltd_").index()*u)};switch(O(),s.format){case"Y":b.hide(),h.hide();break;case"m":g.hide(),y.hide(),h.hide()}var V=function(){var e=h.find("li.dd_sltd_").attr("value"),a=b.find("li.dd_sltd_").attr("value"),i=g.find("li.dd_sltd_").attr("value"),l=y.find("li.dd_sltd_"),t=g.find("li.dd_sltd_").attr("data-filter");"true"==t&&"2"==a?(h.find("ul").width(29*u),(30==e||31==e)&&(h.find("li").removeClass("dd_sltd_"),h.find("li[value=29]").addClass("dd_sltd_"))):"true"!=t&&"2"==a?(h.find("ul").width(28*u),(29==e||30==e||31==e)&&(h.find("li").removeClass("dd_sltd_"),h.find("li[value=28]").addClass("dd_sltd_"))):"11"==a||"4"==a||"6"==a||"9"==a?(h.find("ul").width(30*u),31==e&&(h.find("li").removeClass("dd_sltd_"),h.find("li[value=30]").addClass("dd_sltd_"))):h.find("ul").width(31*u),h.find("li").each(function(){tod=$(this).attr("value"),d=new Date(a+"/"+tod+"/"+i),x=d.getDay(),0==x?$(this).addClass("dd_sunday"):$(this).removeClass("dd_sunday"),$(this).find("em").html(J[x])}),s.years_multiple&&(next=l.next("li"),prev=l.prev("li"),i<next.attr("value")?v>i&&(v=prev.attr("value"),y.find("li").removeClass("dd_sltd_"),prev.addClass("dd_sltd_")):(v=next.attr("value"),y.find("li").removeClass("dd_sltd_"),next.addClass("dd_sltd_")))},E=function(d){r.val(d),p.addClass("dd_fadeout").removeClass("dd_"+s.animation),setTimeout(function(){p.hide().removeClass("dd_fadeout"),m.hide()},300)},Q=function(){p.addClass("dd_alert").removeClass("dd_"+s.animation),setTimeout(function(){p.removeClass("dd_alert")},500)};s.years_multiple&&y.find("li").on("click",function(){y.find("li").removeClass("dd_sltd_"),$(this).addClass("dd_sltd_");var d=$(this).attr("value");v=d,g.find(".dd_sl_").stop().animate({scrollLeft:g.find("li[value="+d+"]").index()*u},1200,"swing"),g.find("li").removeClass("dd_sltd_"),g.find("li[value="+d+"]").addClass("dd_sltd_"),V()}),p.find(".dd_sw_").each(function(){var d=$(this).find(".dd_sl_"),e=$(this).find(".dd_nav_"),a=d.find("li.dd_sltd_").index()*u,i=function(){scroll_left=d.scrollLeft(),a+u/2>scroll_left||(a+=u),scroll_left>a-u/2||(a-=u)};$(this).hover(function(){e.show()},function(){e.hide()}),d.find("ul").width(d.find("li").length*u),d.on("scroll mousemove",function(){i()}),e.click(function(){obj=$(this).hasClass("dd_next_")?d.find("li.dd_sltd_").next("li"):d.find("li.dd_sltd_").prev("li"),obj.length&&(d.stop().animate({scrollLeft:obj.index()*u},200),d.find("li").removeClass("dd_sltd_"),obj.addClass("dd_sltd_"),V())}),d.on("touchend",function(){d.stop().animate({scrollLeft:a},200);var e=a/u;d.find("li").removeClass("dd_sltd_"),d.find("li").eq(e).addClass("dd_sltd_"),V()}),d.find("li").click(function(){d.animate({scrollLeft:$(this).index()*u},200),d.find("li").removeClass("dd_sltd_"),$(this).addClass("dd_sltd_")})}),V(),r.click(function(){m.show(),p.css({top:r.offset().top+(r.height()+12),left:r.offset().left+(r.width()/2-u/2)-2}).show().addClass("dd_"+s.animation),r.hasClass("dd_locked")?(r.removeClass("dd_locked"),0!=s.animate_current?T():q()):G()}),dd_overlay.click(function(){p.addClass("dd_fadeout").removeClass("dd_"+s.animation),setTimeout(function(){p.hide().removeClass("dd_fadeout"),m.hide()},300)}),C.click(function(){var d=h.find("li.dd_sltd_").attr("value"),e=b.find("li.dd_sltd_").attr("value"),r=g.find("li.dd_sltd_").attr("value");if(10>d&&(d="0"+d),10>e&&(e="0"+e),x=new Date(e+"/"+d+"/"+r),x=x.getDay(),j=(""+d).substr(1),D=J[x].substr(0,3),l=J[x],n=10>e?e.substr(1):e,M=w[n-1],F=k[n-1],str=s.format.replace(/\b(Y)\b/i,r).replace(/\b(m)\b/i,e).replace(/\b(d)\b/i,d).replace(/\b(D)\b/i,D).replace(/\b(j)\b/i,j).replace(/\b(l)\b/i,l).replace(/\b(F)\b/i,F).replace(/\b(M)\b/i,M).replace(/\b(n)\b/i,n),s.lock){d1d=i,10>d1d&&(d1d="0"+d1d),d1m=t+1,10>d1m&&(d1m="0"+d1m),d1y=a;var o=Date.parse(d1y+"-"+d1m+"-"+d1d)/1e3,_=Date.parse(r+"-"+e+"-"+d)/1e3;"from"==s.lock?o>_?Q():E(str):_>o?Q():E(str)}else E(str)})}};
