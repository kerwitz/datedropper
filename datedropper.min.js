

	//////////////////////////////////////
	// DATEDROPPER Version 1	    //
	// Last Updates: 20/02/2015	    //
	//		  		    //
	// Made with love by		    //
	// Felice Gattuso		    //
	//////////////////////////////////////


$.fn.dateDropper=function(a){if(this.is("input")&&"text"==this.attr("type")){var b=(new Date).getFullYear(),c=(new Date).getDate(),e=(new Date).getMonth(),f=$.extend({animate_current:!0,animation:"fadein",color:"#f87a54",format:"m/d/Y",lang:"en",lock:!1,maxYear:b,minYear:1970,placeholder:"Select date",years_multiple:!1},a),g=this,h=$(".dd_wrap").length+1,i=function(a){return!(a%4||!(a%100)&&a%400)},k=100,m=/^#[0-9A-F]{6}$/i.test(f.color),o=function(a){return a.toString().substr(0,3)+f.years_multiple},p=0;m||(f.color="#f87a54"),f.maxYear<b&&(b=f.maxYear),$('<div class="dd_wrap" id="dd_'+h+'"><div class="dd_overlay"></div><div class="dd_"></div></div>').appendTo("body");var q=$("#dd_"+h),r=q.find(".dd_");dd_overlay=q.find(".dd_overlay"),$(window).on("resize",function(){r.css({top:g.offset().top+(g.height()+12),left:g.offset().left+(g.width()/2-k/2)-2})}),$("<style>#dd_"+h+" .dd_ .dd_submit,#dd_"+h+" .dd_ .dd_r_ ul li { background-color: "+f.color+"; } #dd_"+h+" .dd_ .dd_d_ .dd_sl_ ul li em , #dd_"+h+" .dd_ .dd_d_ .dd_sl_ ul li.dd_sunday{ color: "+f.color+"; }</style>").appendTo("head"),g.attr({readonly:"readonly"}).addClass("dd_locked").val(f.placeholder),r.append('<div class="dd_sw_ dd_m_"><a class="dd_nav_ dd_prev_"></a><a class="dd_nav_ dd_next_"></a><div class="dd_sl_"></div></div>'),r.append('<div class="dd_sw_ dd_d_"><a class="dd_nav_ dd_prev_"></a><a class="dd_nav_ dd_next_"></a><div class="dd_sl_"></div></div>'),r.append('<div class="dd_sw_ dd_y_"><a class="dd_nav_ dd_prev_"></a><a class="dd_nav_ dd_next_"></a><div class="dd_sl_"></div></div>'),f.years_multiple&&r.append('<div class="dd_r_"></div>'),r.append('<div class="dd_submit"></div>');var s=r.find(".dd_m_"),t=r.find(".dd_d_"),v=(r.find(".dd_y_w"),r.find(".dd_y_")),w=r.find(".dd_r_"),y=r.find(".dd_submit");switch(f.lang){case"si":var z=["januar","februar","marec","april","maj","junij","julij","avgust","september","oktober","november","december"],A=["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dev"],B=["nedelja","ponedeljek","torek","sreda","\u010detrtek","petek","sobota"];break;case"it":var z=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],A=["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],B=["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Gioved\xec","Venerd\xec","Sabato"];break;case"hu":var z=["janu\xe1r","febru\xe1r","m\xe1rcius","\xe1prilis","m\xe1jus","j\xfanius","j\xfalius","augusztus","szeptember","okt\xf3ber","november","december"],A=["jan.","febr.","m\xe1rc.","\xe1pr.","m\xe1j.","j\xfan.","j\xfal.","aug.","szept.","okt.","nov.","dec."],B=["vas\xe1rnap","h\xe9tf\u0151","kedd","szerda","cs\xfct\xf6rt\xf6k","p\xe9ntek","szombat"];break;case"es":var z=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],A=["Ene.","Feb.","Mar.","Abr.","May.","Jun.","Jul.","Ago.","Sept.","Oct.","Nov.","Dic."],B=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","Samedi"];break;case"de":var z=["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],A=["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sept","Okt","Nov","Dez"],B=["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"];break;case"nl":var z=["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],A=["Jan.","Feb.","Mrt.","Apr.","Mei","Jun.","Jul.","Aug.","Sep.","Okt.","Nov.","Dec."],B=["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"];break;case"fr":var z=["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],A=["Janv.","F\xe9vr.","Mars","Avr.","Mai","Juin","Juil.","Ao\xfbt","Sept.","Oct.","Nov.","D\xe9c."],B=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"];break;case"pt":var z=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],A=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],B=["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"];break;default:var z=["January","February","March","April","May","June","July","August","September","October","November","December"],A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}s.find(".dd_sl_").append("<ul></ul>");for(var C=1;12>=C;C++)months=A[C-1],s.find("ul").append('<li value="'+C+'">'+months+"</li>");t.find(".dd_sl_").append("<ul></ul>");for(var E=1;31>=E;E++)ddd=10>E?"0"+E:E,t.find("ul").append('<li value="'+E+'">'+ddd+"<em ></em></li>");v.find(".dd_sl_").append("<ul></ul>");for(var G=f.minYear;G<=f.maxYear;G++)bissextile_return=i(G),v.find("ul").append('<li value="'+G+'" data-filter="'+bissextile_return+'">'+G+"</li>");if(f.years_multiple){w.append("<ul></ul>");for(var H=f.minYear;H<=f.maxYear;H++){var I=H%f.years_multiple;0==I&&w.find("ul").append('<li value="'+H+'"></li>')}var J=k/w.find("li").length;w.find("li").css({width:J+"%"}),w.find("li[value="+o(b)+"]").addClass("dd_sltd_")}var K=function(){t.find("li").eq(c-1).addClass("dd_sltd_"),s.find("li").eq(e).addClass("dd_sltd_"),v.find("li[value="+b+"]").addClass("dd_sltd_"),f.years_multiple&&w.find("li[value="+o(b)+"]").addClass("dd_sltd_")},L=function(){s.find(".dd_sl_").animate({scrollLeft:e*k},1200,"swing"),setTimeout(function(){t.find(".dd_sl_").animate({scrollLeft:(c-1)*k},1200,"swing"),setTimeout(function(){v.find(".dd_sl_").animate({scrollLeft:v.find(".dd_sl_ li[value="+b+"]").index()*k},1200,"swing")},200)},400)},N=function(){s.find(".dd_sl_").scrollLeft(e*k),t.find(".dd_sl_").scrollLeft((c-1)*k),v.find(".dd_sl_").scrollLeft(v.find(".dd_sl_ li[value="+b+"]").index()*k)},O=function(){s.find(".dd_sl_").scrollLeft(s.find("li.dd_sltd_").index()*k),t.find(".dd_sl_").scrollLeft(t.find("li.dd_sltd_").index()*k),v.find(".dd_sl_").scrollLeft(v.find("li.dd_sltd_").index()*k)};switch(K(),f.format){case"Y":s.hide(),t.hide();break;case"m":v.hide(),w.hide(),t.hide()}var P=function(){var a=t.find("li.dd_sltd_").attr("value"),b=s.find("li.dd_sltd_").attr("value"),c=v.find("li.dd_sltd_").attr("value"),e=w.find("li.dd_sltd_"),g=v.find("li.dd_sltd_").attr("data-filter");"true"==g&&"2"==b?(t.find("ul").width(29*k),(30==a||31==a)&&(t.find("li").removeClass("dd_sltd_"),t.find("li[value=29]").addClass("dd_sltd_"))):"true"!=g&&"2"==b?(t.find("ul").width(28*k),(29==a||30==a||31==a)&&(t.find("li").removeClass("dd_sltd_"),t.find("li[value=28]").addClass("dd_sltd_"))):"11"==b||"4"==b||"6"==b||"9"==b?(t.find("ul").width(30*k),31==a&&(t.find("li").removeClass("dd_sltd_"),t.find("li[value=30]").addClass("dd_sltd_"))):t.find("ul").width(31*k),t.find("li").each(function(){tod=$(this).attr("value"),d=new Date(b+"/"+tod+"/"+c),x=d.getDay(),0==x?$(this).addClass("dd_sunday"):$(this).removeClass("dd_sunday"),$(this).find("em").html(B[x])}),f.years_multiple&&(next=e.next("li"),prev=e.prev("li"),c>=next.attr("value")?(p=next.attr("value"),w.find("li").removeClass("dd_sltd_"),next.addClass("dd_sltd_")):p>c&&(p=prev.attr("value"),w.find("li").removeClass("dd_sltd_"),prev.addClass("dd_sltd_")))},Q=function(a){g.val(a),r.addClass("dd_fadeout").removeClass("dd_"+f.animation),setTimeout(function(){r.hide().removeClass("dd_fadeout"),q.hide()},300)},R=function(){r.addClass("dd_alert").removeClass("dd_"+f.animation),setTimeout(function(){r.removeClass("dd_alert")},500)};f.years_multiple&&w.find("li").on("click",function(){w.find("li").removeClass("dd_sltd_"),$(this).addClass("dd_sltd_");var a=$(this).attr("value");p=a,v.find(".dd_sl_").stop().animate({scrollLeft:v.find("li[value="+a+"]").index()*k},1200,"swing"),v.find("li").removeClass("dd_sltd_"),v.find("li[value="+a+"]").addClass("dd_sltd_"),P()}),r.find(".dd_sw_").each(function(){var c=$(this).find(".dd_sl_"),d=$(this).find(".dd_nav_"),e=c.find("li.dd_sltd_").index()*k,f=function(){scroll_left=c.scrollLeft(),scroll_left>=e+k/2&&(e+=k),e-k/2>=scroll_left&&(e-=k)};$(this).hover(function(){d.show()},function(){d.hide()}),c.find("ul").width(c.find("li").length*k),c.on("scroll mousemove",function(){f()}),d.click(function(){obj=$(this).hasClass("dd_next_")?c.find("li.dd_sltd_").next("li"):c.find("li.dd_sltd_").prev("li"),obj.length&&(c.stop().animate({scrollLeft:obj.index()*k},200),c.find("li").removeClass("dd_sltd_"),obj.addClass("dd_sltd_"),P())}),c.on("touchend",function(){c.stop().animate({scrollLeft:e},200);var a=e/k;c.find("li").removeClass("dd_sltd_"),c.find("li").eq(a).addClass("dd_sltd_"),P()}),c.find("li").click(function(){c.animate({scrollLeft:$(this).index()*k},200),c.find("li").removeClass("dd_sltd_"),$(this).addClass("dd_sltd_")})}),P(),g.click(function(){q.show(),r.css({top:g.offset().top+(g.height()+12),left:g.offset().left+(g.width()/2-k/2)-2}).show().addClass("dd_"+f.animation),g.hasClass("dd_locked")?(g.removeClass("dd_locked"),0!=f.animate_current?L():N()):O()}),dd_overlay.click(function(){r.addClass("dd_fadeout").removeClass("dd_"+f.animation),setTimeout(function(){r.hide().removeClass("dd_fadeout"),q.hide()},300)}),y.click(function(){var a=t.find("li.dd_sltd_").attr("value"),d=s.find("li.dd_sltd_").attr("value"),g=v.find("li.dd_sltd_").attr("value");if(10>a&&(a="0"+a),10>d&&(d="0"+d),x=new Date(d+"/"+a+"/"+g),x=x.getDay(),j=a.substr(1),D=B[x].substr(0,3),l=B[x],n=10>d?d.substr(1):d,M=A[n-1],F=z[n-1],str=f.format.replace(/\b(Y)\b/i,g).replace(/\b(m)\b/i,d).replace(/\b(d)\b/i,a).replace(/\b(D)\b/i,D).replace(/\b(j)\b/i,j).replace(/\b(l)\b/i,l).replace(/\b(F)\b/i,F).replace(/\b(M)\b/i,M).replace(/\b(n)\b/i,n),f.lock){d1d=c,10>d1d&&(d1d="0"+d1d),d1m=e+1,10>d1m&&(d1m="0"+d1m),d1y=b;var h=Date.parse(d1y+"-"+d1m+"-"+d1d)/1e3,i=Date.parse(g+"-"+d+"-"+a)/1e3;"from"==f.lock?h>i?R():Q(str):i>h?R():Q(str)}else Q(str)})}};
